# QuickLabel ⚡️
**キーボード操作で爆速ラベリング！CUIベースの画像アノテーションツール**  

`QuickLabel`は、機械学習プロジェクトにおける面倒な画像ラベリング作業を、キーボード操作だけで高速かつ快適に行うために開発されたCUIツールです。  
マウスに手を伸ばすことなく、思考を止めずに作業に集中できます。単一ラベル分類からマルチラベル分類まで、あなたのプロジェクトに合わせて柔軟に動作します。✨ 

## 特徴 (Features)
- キーボード中心の高速操作: マウスは不要！全ての操作はキーボードショートカットで完結します。
- 選べる3つの操作モード: 用途に応じて「単一ラベル」「マルチラベル」「ラベルマスタ作成」のモードを切り替え可能。
- OpenCVによる画像表示: どんな環境でも安定した画像表示ウィンドウを提供します。
- 自動セットアップ: プロジェクトフォルダを指定するだけで、必要な設定ファイル (`labels.json`など) を自動で生成します。
- 堅牢な状態管理: 作業は随時保存されるため、予期せずツールを終了しても進捗が失われる心配がありません。
- 柔軟なコマンド体系: 次へ/前へはもちろん、ラベルの検索やその場での追加など、かゆいところに手が届くコマンドを用意。

## 📦 動作要件 (Requirements)
- Python 3.7 以上
- OpenCV (`opencv-python`)

## 🚀 インストール (Installation)
リポジトリをクローンします。
``` 
git clone https://github.com/your_username/QuickLabel.git
cd QuickLabel 
```
必要なライブラリをインストールします。
```
pip install opencv-python
```

## 使い方 (Usage)
`main.py`をターミナルから実行します。 `--folder`で画像が格納されたフォルダのパスを、`--mode`で操作モードを指定してください。
```
python main.py --folder <画像フォルダへのパス> --mode <操作モード>
```

## モード別起動例  
1. ラベルマスタ作成モード (`add_label`)最初に、プロジェクトで使うラベルのリストを作成します。
    ```
    python main.py --folder ./my_dataset --mode add_label
    ```
    - 指定したフォルダに`labels.json`がなければ、空のファイルが自動で作成されます。
    - ターミナルにラベル名を入力してEnterを押すと、リストに追加されます。

2. マルチラベルモード (`multi`)
    1つの画像に複数のラベルを付けたい場合に使用します。
    ```
    python main.py --folder ./my_dataset --mode multi
    ```
    - 画像がOpenCVのウィンドウで表示され、ターミナルで操作を行います。
    - ラベル番号をスペースまたはカンマ区切りで入力すると、その画像にラベルが紐付けられます。

3. 単一ラベルモード (`single`)
    1つの画像に1つのラベルだけを付ける場合に使用します。操作はマルチラベルモードと似ていますが、一つの番号しか入力できません。
    ```
        python main.py --folder ./my_dataset --mode single
    ```

## ⌨️ コマンド一覧
ラベリング中（`single`/`multi`モード）に、以下のコマンドが使用できます。  
| コマンド | 説明 | 入力例 |
| --- | --- | --- |
| (番号入力) | ラベル番号でラベルを付与します。複数指定も可能です。 | `1 5 12` |
| `n` | **N**ext. 現在の画像にラベルを付けずに、次の画像へ進みます。 | `n` |
| `p` | **P**revious. 直前の画像に戻って、作業をやり直します。| `p` |
| `s <キーワード>` | **S**earch. ラベルリストからキーワードを含むラベルを検索します。 | `s 犬` | 
| `a <ラベル名>` | **A**dd. その場で新しいラベルをマスタリストに追加します。 | `a 人間` | 
| `r <ラベル番号>` | **R**emove. 現在の画像から指定した番号のラベルを削除します。 | `r 5` |
| `q` | Quit. 作業内容を保存して、ツールを終了します。 | `q` |

## 📁 生成されるファイル
`--folder`で指定したフォルダ内には、以下の管理ファイルが自動で生成されます。
- `labels.json`: プロジェクトで使うラベルのマスタリスト。（例: `{"labels": ["車", ...]}`）
- `annotations.json`: ラベル付けした結果が保存される、このツールの主たる成果物。  
（例: `{"annotations": {"image_01.jpg": ["猫"], ...}}`）
- `state.json`: 「どこまで作業したか」という進捗を記録するファイル。（例: `{"last_processed_index": 35}`）